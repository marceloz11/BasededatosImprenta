CREATE TABLE Cliente (
    cedula INT AUTO_INCREMENT PRIMARY KEY,
    correo VARCHAR(90),
    nombre VARCHAR(50),
    direccion VARCHAR(120),
    telefono int
    
);

Create table Empleado (
  Cedula INT AUTO_INCREMENT PRIMARY KEY,
  Correo VARCHAR(90),
  Nombre_Completo VARCHAR(50),
  celular INT,
  rol ENUM('Diseñador_graafi', 'dis_preprensa', 'op_corte', 'op_impresion', 'op_acabados', 'op_caja', 'supervisor') NOT NULL,
  Pass VARCHAR(20)
);

CREATE TABLE Pedido (
    id_pedido INT AUTO_INCREMENT PRIMARY KEY,
    fecha_emision DATE,
    fecha_entrega DATE,
    precio_pedido VARCHAR(20) -- El diagrama indicaba Char(20), se pasa a Varchar
);

CREATE TABLE Registro (
    Id_Registro INT AUTO_INCREMENT PRIMARY KEY,
    Id_Pedido INT NOT NULL,
    Fecha_emision DATE,
    Fecha_entrega DATE,
    Id_cajero INT,
    FOREIGN KEY (Id_pedido) REFERENCES Pedido(Id_pedido),
    FOREIGN KEY (Id_cajero) REFERENCES Empleado(Id_empleado)
);

CREATE TABLE Modificacion (
    Modificacion_ID INT AUTO_INCREMENT PRIMARY KEY,
    cedula int,
    fecha DATE,
    especificacion VARCHAR(200),
    id_pedido INT,
    FOREIGN KEY (cedula) REFERENCES Cliente(cedula),
    FOREIGN KEY (id_pedido) REFERENCES Pedido(id_pedido)
);

CREATE TABLE Producto (
    Id_producto INT AUTO_INCREMENT PRIMARY KEY,
    Nombre_Prod VARHAR(50),
    Precio DECIAML(8,2),
    Tipo VARCHAR(20),
    Id_pedido INT,
    Id_supervisor INT,
    FOREIGN KEY (Id_pedido) REFERENCES (Id_pedido),
    FOREIGN KEY (Id_supervisor) REFERENCES (Id_empleado)
);

-- Según su instrucción, se crea con id_orden como INT AUTO_INCREMENT
CREATE TABLE Orden_De_Trabajo (
    id_orden INT AUTO_INCREMENT PRIMARY KEY,
    id_pedido INT,
    id_registro INT,
    id_producto INT,
    estado VARCHAR(20),
    plazo DATE,
    descrip_tarea VARCHAR(300),
    tipo_orden ENUM('Interna', 'Externa'), -- Ejemplo de Enum para tipo_orden
    FOREIGN KEY (id_pedido) REFERENCES Pedido(id_pedido),
    FOREIGN KEY (id_registro) REFERENCES Registro(id_registro),
    FOREIGN KEY (id_producto) REFERENCES Producto(id_producto)
);

CREATE TABLE Factura (
    Id_factura INT AUTO_INCREMENT PRIMARY KEY,
    Numero VARCHAR(20),
    Fecha_emision DATE,
    Estado VARCHAR(30),
    Total DECIAML(10,2),
    Id_pedido INT,
    Cedula_Cliente INT,
    Id_Cajero INT,
    FOREIGN KEY (Id_pedido) REFERENCES Pedido(Id_Pedido),
    FOREIGN KEY (Cedula_Cliente) REFERENCES Cliente(Cedula),
    FOREIGN KEY (Id_cajero) REFERENCES Empleado(Id_empleado)
);

CREATE TABLE Acabado (
    id_orden INT PRIMARY KEY,
    tipo_de_acabado VARCHAR(50),
    FOREIGN KEY (id_orden) REFERENCES Orden_De_Trabajo(id_orden)
);

CREATE TABLE Orden_Especial (
    id_orden INT PRIMARY KEY,
    id_tipo_especial INT,
    detalle_especial VARCHAR(100),
    FOREIGN KEY (id_orden) REFERENCES Orden_De_Trabajo(id_orden)
);
